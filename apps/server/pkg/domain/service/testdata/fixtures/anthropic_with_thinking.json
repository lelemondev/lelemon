{
  "_description": "Anthropic Messages API - Extended thinking (claude-3-5-sonnet with thinking)",
  "_source": "https://docs.anthropic.com/en/docs/build-with-claude/extended-thinking",
  "_captured": "2026-01-10",
  "request": {
    "model": "claude-3-5-sonnet-20241022",
    "max_tokens": 16000,
    "thinking": {
      "type": "enabled",
      "budget_tokens": 10000
    },
    "messages": [
      {
        "role": "user",
        "content": "What is the probability of getting exactly 3 heads in 5 coin flips?"
      }
    ]
  },
  "response": {
    "id": "msg_01XqE4WvPm9aQj7qGkVmKfYN",
    "type": "message",
    "role": "assistant",
    "model": "claude-3-5-sonnet-20241022",
    "content": [
      {
        "type": "thinking",
        "thinking": "Let me work through this step by step.\n\nThis is a binomial probability problem. I need to find P(X = 3) where X is the number of heads in 5 flips.\n\nThe formula is: P(X = k) = C(n, k) * p^k * (1-p)^(n-k)\n\nWhere:\n- n = 5 (number of trials)\n- k = 3 (number of successes we want)\n- p = 0.5 (probability of heads on each flip)\n\nFirst, let me calculate C(5, 3) = 5! / (3! * 2!) = (5 * 4) / (2 * 1) = 10\n\nThen: P(X = 3) = 10 * (0.5)^3 * (0.5)^2 = 10 * 0.125 * 0.25 = 10 * 0.03125 = 0.3125\n\nSo the probability is 31.25% or 5/16."
      },
      {
        "type": "text",
        "text": "The probability of getting exactly 3 heads in 5 coin flips is **31.25%** (or 5/16).\n\nHere's the calculation:\n\n1. Use the binomial probability formula: P(X = k) = C(n,k) × p^k × (1-p)^(n-k)\n\n2. With n=5 flips, k=3 heads, p=0.5:\n   - C(5,3) = 10 (ways to choose which 3 flips are heads)\n   - (0.5)³ = 0.125 (probability of 3 heads)\n   - (0.5)² = 0.25 (probability of 2 tails)\n\n3. Result: 10 × 0.125 × 0.25 = **0.3125** = 31.25%"
      }
    ],
    "stop_reason": "end_turn",
    "stop_sequence": null,
    "usage": {
      "input_tokens": 24,
      "output_tokens": 487
    }
  },
  "expected": {
    "output_type": "string",
    "output_contains": "31.25%",
    "input_tokens": 24,
    "output_tokens": 487,
    "stop_reason": "end_turn",
    "sub_type": "response",
    "has_thinking": true,
    "thinking_contains": "binomial probability"
  }
}
